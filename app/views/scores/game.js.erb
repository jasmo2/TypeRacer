$('#play').hide().after('<%= j render "games/game" %>');
var $gameInput = $("#game-input");
var $gameText = $("#game-text");
var $gameSlider = $("#slider");
var game = new theGame({text: $gameText, gameInput: $gameInput});
var wordCount = 0 , textCount = 0;
//game.initializer();
$gameInput.keypress(function(e) {
  var eChar = String.fromCharCode(e.keyCode);
  var wordArray = game.wordArray(game.textArray()[textCount]);
  if (e.which === 32 && wordCount == wordArray.length ) {
    wordCount = 0;
    textCount ++;
    $gameSlider.val(game.paso(textCount));
    $gameInput.css({
      "background" : "rgba(117,255,7,0)"
    });
  }else if (eChar === wordArray[wordCount] && $(this).val().length === wordCount) {
    wordCount++;
    $gameInput.css({
      "background" : "rgba(117,255,7,0.4)"
    });
  }else{
    wordCount++;
    $gameInput.css({
      "background" : "rgba(255,7,7,0.4)"
    });
  };  
});

$gameInput.keyup(function(e){
  if(e.keyCode === 8  && wordCount !== 0){
    wordCount--;
  }
  if(e.keyCode === 32 ){
    $gameInput.val("");
    $gameInput.val().replace(/[^\w ]/g, "");
    //debugger
  }

});